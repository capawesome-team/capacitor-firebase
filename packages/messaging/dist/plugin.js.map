{"version":3,"file":"plugin.js","sources":["esm/definitions.js","esm/index.js","esm/web.js"],"sourcesContent":["/// <reference types=\"@capacitor/cli\" />\n/**\n * The importance level.\n *\n * For more details, see the [Android Developer Docs](https://developer.android.com/reference/android/app/NotificationManager#IMPORTANCE_DEFAULT)\n *\n * @since 1.4.0\n */\nexport var Importance;\n(function (Importance) {\n    /**\n     * @since 1.4.0\n     */\n    Importance[Importance[\"Min\"] = 1] = \"Min\";\n    /**\n     * @since 1.4.0\n     */\n    Importance[Importance[\"Low\"] = 2] = \"Low\";\n    /**\n     * @since 1.4.0\n     */\n    Importance[Importance[\"Default\"] = 3] = \"Default\";\n    /**\n     * @since 1.4.0\n     */\n    Importance[Importance[\"High\"] = 4] = \"High\";\n    /**\n     * @since 1.4.0\n     */\n    Importance[Importance[\"Max\"] = 5] = \"Max\";\n})(Importance || (Importance = {}));\n/**\n * The notification visibility.\n *\n * For more details, see the [Android Developer Docs](https://developer.android.com/reference/androidx/core/app/NotificationCompat#VISIBILITY_PRIVATE())\n *\n * @since 1.4.0\n */\nexport var Visibility;\n(function (Visibility) {\n    /**\n     * @since 1.4.0\n     */\n    Visibility[Visibility[\"Secret\"] = -1] = \"Secret\";\n    /**\n     * @since 1.4.0\n     */\n    Visibility[Visibility[\"Private\"] = 0] = \"Private\";\n    /**\n     * @since 1.4.0\n     */\n    Visibility[Visibility[\"Public\"] = 1] = \"Public\";\n})(Visibility || (Visibility = {}));\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from '@capacitor/core';\nconst FirebaseMessaging = registerPlugin('FirebaseMessaging', {\n    web: () => import('./web').then(m => new m.FirebaseMessagingWeb()),\n});\nexport * from './definitions';\nexport { FirebaseMessaging };\n//# sourceMappingURL=index.js.map","import { WebPlugin } from '@capacitor/core';\nimport { deleteToken, getMessaging, getToken, isSupported as isSupportedInWeb, onMessage, } from 'firebase/messaging';\nexport class FirebaseMessagingWeb extends WebPlugin {\n    constructor() {\n        super();\n        isSupportedInWeb().then(supported => {\n            if (!supported) {\n                return;\n            }\n            const messaging = getMessaging();\n            onMessage(messaging, payload => this.handleNotificationReceived(payload));\n        });\n    }\n    async checkPermissions() {\n        const isSupported = await isSupportedInWeb();\n        if (!isSupported) {\n            return {\n                receive: 'denied',\n            };\n        }\n        const receive = this.convertNotificationPermissionToPermissionState(Notification.permission);\n        return {\n            receive,\n        };\n    }\n    async requestPermissions() {\n        const isSupported = await isSupportedInWeb();\n        if (!isSupported) {\n            return {\n                receive: 'denied',\n            };\n        }\n        const notificationPermission = await Notification.requestPermission();\n        const receive = this.convertNotificationPermissionToPermissionState(notificationPermission);\n        return {\n            receive,\n        };\n    }\n    async isSupported() {\n        const isSupported = await isSupportedInWeb();\n        return {\n            isSupported,\n        };\n    }\n    async getToken(options) {\n        const messaging = getMessaging();\n        const token = await getToken(messaging, {\n            vapidKey: options.vapidKey,\n            serviceWorkerRegistration: options.serviceWorkerRegistration,\n        });\n        return {\n            token,\n        };\n    }\n    async deleteToken() {\n        const messaging = getMessaging();\n        await deleteToken(messaging);\n    }\n    async getDeliveredNotifications() {\n        this.throwUnavailableError();\n    }\n    async removeDeliveredNotifications(_options) {\n        this.throwUnavailableError();\n    }\n    async removeAllDeliveredNotifications() {\n        this.throwUnavailableError();\n    }\n    async subscribeToTopic(_options) {\n        this.throwUnavailableError();\n    }\n    async unsubscribeFromTopic(_options) {\n        this.throwUnavailableError();\n    }\n    async createChannel(_options) {\n        this.throwUnavailableError();\n    }\n    async deleteChannel(_options) {\n        this.throwUnavailableError();\n    }\n    async listChannels() {\n        this.throwUnavailableError();\n    }\n    handleNotificationReceived(messagePayload) {\n        const notification = this.createNotificationResult(messagePayload);\n        const event = {\n            notification,\n        };\n        this.notifyListeners(FirebaseMessagingWeb.notificationReceivedEvent, event);\n    }\n    createNotificationResult(messagePayload) {\n        var _a, _b, _c;\n        const notification = {\n            body: (_a = messagePayload.notification) === null || _a === void 0 ? void 0 : _a.body,\n            data: messagePayload.data,\n            id: messagePayload.messageId,\n            image: (_b = messagePayload.notification) === null || _b === void 0 ? void 0 : _b.image,\n            title: (_c = messagePayload.notification) === null || _c === void 0 ? void 0 : _c.title,\n        };\n        return notification;\n    }\n    convertNotificationPermissionToPermissionState(permission) {\n        let state = 'prompt';\n        switch (permission) {\n            case 'granted':\n                state = 'granted';\n                break;\n            case 'denied':\n                state = 'denied';\n                break;\n        }\n        return state;\n    }\n    throwUnavailableError() {\n        throw this.unavailable('Not available on web.');\n    }\n}\nFirebaseMessagingWeb.notificationReceivedEvent = 'notificationReceived';\n//# sourceMappingURL=web.js.map"],"names":["Importance","Visibility","registerPlugin","WebPlugin","isSupportedInWeb","messaging","getMessaging","onMessage","getToken","deleteToken"],"mappings":"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"}