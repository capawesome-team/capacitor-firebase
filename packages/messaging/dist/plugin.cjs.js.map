{"version":3,"file":"plugin.cjs.js","sources":["esm/definitions.js","esm/index.js","esm/web.js"],"sourcesContent":["/// <reference types=\"@capacitor/cli\" />\n/**\n * The importance level.\n *\n * For more details, see the [Android Developer Docs](https://developer.android.com/reference/android/app/NotificationManager#IMPORTANCE_DEFAULT)\n *\n * @since 1.4.0\n */\nexport var Importance;\n(function (Importance) {\n    /**\n     * @since 1.4.0\n     */\n    Importance[Importance[\"Min\"] = 1] = \"Min\";\n    /**\n     * @since 1.4.0\n     */\n    Importance[Importance[\"Low\"] = 2] = \"Low\";\n    /**\n     * @since 1.4.0\n     */\n    Importance[Importance[\"Default\"] = 3] = \"Default\";\n    /**\n     * @since 1.4.0\n     */\n    Importance[Importance[\"High\"] = 4] = \"High\";\n    /**\n     * @since 1.4.0\n     */\n    Importance[Importance[\"Max\"] = 5] = \"Max\";\n})(Importance || (Importance = {}));\n/**\n * The notification visibility.\n *\n * For more details, see the [Android Developer Docs](https://developer.android.com/reference/androidx/core/app/NotificationCompat#VISIBILITY_PRIVATE())\n *\n * @since 1.4.0\n */\nexport var Visibility;\n(function (Visibility) {\n    /**\n     * @since 1.4.0\n     */\n    Visibility[Visibility[\"Secret\"] = -1] = \"Secret\";\n    /**\n     * @since 1.4.0\n     */\n    Visibility[Visibility[\"Private\"] = 0] = \"Private\";\n    /**\n     * @since 1.4.0\n     */\n    Visibility[Visibility[\"Public\"] = 1] = \"Public\";\n})(Visibility || (Visibility = {}));\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from '@capacitor/core';\nconst FirebaseMessaging = registerPlugin('FirebaseMessaging', {\n    web: () => import('./web').then(m => new m.FirebaseMessagingWeb()),\n});\nexport * from './definitions';\nexport { FirebaseMessaging };\n//# sourceMappingURL=index.js.map","import { WebPlugin } from '@capacitor/core';\nimport { deleteToken, getMessaging, getToken, isSupported as isSupportedInWeb, onMessage, } from 'firebase/messaging';\nexport class FirebaseMessagingWeb extends WebPlugin {\n    constructor() {\n        super();\n        isSupportedInWeb().then(supported => {\n            if (!supported) {\n                return;\n            }\n            const messaging = getMessaging();\n            onMessage(messaging, payload => this.handleNotificationReceived(payload));\n        });\n    }\n    async checkPermissions() {\n        const isSupported = await isSupportedInWeb();\n        if (!isSupported) {\n            return {\n                receive: 'denied',\n            };\n        }\n        const receive = this.convertNotificationPermissionToPermissionState(Notification.permission);\n        return {\n            receive,\n        };\n    }\n    async requestPermissions() {\n        const isSupported = await isSupportedInWeb();\n        if (!isSupported) {\n            return {\n                receive: 'denied',\n            };\n        }\n        const notificationPermission = await Notification.requestPermission();\n        const receive = this.convertNotificationPermissionToPermissionState(notificationPermission);\n        return {\n            receive,\n        };\n    }\n    async isSupported() {\n        const isSupported = await isSupportedInWeb();\n        return {\n            isSupported,\n        };\n    }\n    async getToken(options) {\n        const messaging = getMessaging();\n        const token = await getToken(messaging, {\n            vapidKey: options.vapidKey,\n            serviceWorkerRegistration: options.serviceWorkerRegistration,\n        });\n        return {\n            token,\n        };\n    }\n    async deleteToken() {\n        const messaging = getMessaging();\n        await deleteToken(messaging);\n    }\n    async getDeliveredNotifications() {\n        this.throwUnavailableError();\n    }\n    async removeDeliveredNotifications(_options) {\n        this.throwUnavailableError();\n    }\n    async removeAllDeliveredNotifications() {\n        this.throwUnavailableError();\n    }\n    async subscribeToTopic(_options) {\n        this.throwUnavailableError();\n    }\n    async unsubscribeFromTopic(_options) {\n        this.throwUnavailableError();\n    }\n    async createChannel(_options) {\n        this.throwUnavailableError();\n    }\n    async deleteChannel(_options) {\n        this.throwUnavailableError();\n    }\n    async listChannels() {\n        this.throwUnavailableError();\n    }\n    handleNotificationReceived(messagePayload) {\n        const notification = this.createNotificationResult(messagePayload);\n        const event = {\n            notification,\n        };\n        this.notifyListeners(FirebaseMessagingWeb.notificationReceivedEvent, event);\n    }\n    createNotificationResult(messagePayload) {\n        var _a, _b, _c;\n        const notification = {\n            body: (_a = messagePayload.notification) === null || _a === void 0 ? void 0 : _a.body,\n            data: messagePayload.data,\n            id: messagePayload.messageId,\n            image: (_b = messagePayload.notification) === null || _b === void 0 ? void 0 : _b.image,\n            title: (_c = messagePayload.notification) === null || _c === void 0 ? void 0 : _c.title,\n        };\n        return notification;\n    }\n    convertNotificationPermissionToPermissionState(permission) {\n        let state = 'prompt';\n        switch (permission) {\n            case 'granted':\n                state = 'granted';\n                break;\n            case 'denied':\n                state = 'denied';\n                break;\n        }\n        return state;\n    }\n    throwUnavailableError() {\n        throw this.unavailable('Not available on web.');\n    }\n}\nFirebaseMessagingWeb.notificationReceivedEvent = 'notificationReceived';\n//# sourceMappingURL=web.js.map"],"names":["Importance","Visibility","registerPlugin","WebPlugin","isSupportedInWeb","messaging","getMessaging","onMessage","getToken","deleteToken"],"mappings":"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"}