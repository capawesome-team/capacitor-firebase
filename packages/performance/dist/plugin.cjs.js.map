{"version":3,"file":"plugin.cjs.js","sources":["esm/index.js","esm/web.js"],"sourcesContent":["import { registerPlugin } from '@capacitor/core';\nconst FirebasePerformance = registerPlugin('FirebasePerformance', {\n    web: () => import('./web').then(m => new m.FirebasePerformanceWeb()),\n});\nexport * from './definitions';\nexport { FirebasePerformance };\n//# sourceMappingURL=index.js.map","import { WebPlugin } from '@capacitor/core';\nimport { trace as createTrace, getPerformance } from 'firebase/performance';\nexport class FirebasePerformanceWeb extends WebPlugin {\n    constructor() {\n        super(...arguments);\n        this.traces = {};\n    }\n    async startTrace(options) {\n        const perf = getPerformance();\n        const trace = createTrace(perf, options.traceName);\n        trace.start();\n        this.traces[options.traceName] = trace;\n    }\n    async stopTrace(options) {\n        const trace = this.traces[options.traceName];\n        if (!trace) {\n            throw new Error(FirebasePerformanceWeb.ERROR_TRACE_NOT_FOUND);\n        }\n        trace.stop();\n        delete this.traces[options.traceName];\n    }\n    async incrementMetric(options) {\n        const trace = this.traces[options.traceName];\n        if (!trace) {\n            throw new Error(FirebasePerformanceWeb.ERROR_TRACE_NOT_FOUND);\n        }\n        trace.incrementMetric(options.metricName, options.incrementBy);\n    }\n    async setEnabled(options) {\n        const perf = getPerformance();\n        perf.instrumentationEnabled = options.enabled;\n        perf.dataCollectionEnabled = options.enabled;\n    }\n    async isEnabled() {\n        const perf = getPerformance();\n        const result = {\n            enabled: perf.instrumentationEnabled || perf.dataCollectionEnabled,\n        };\n        return result;\n    }\n    async putAttribute({ traceName, attribute, value, }) {\n        const trace = this.traces[traceName];\n        if (!trace) {\n            throw new Error(FirebasePerformanceWeb.ERROR_TRACE_NOT_FOUND);\n        }\n        trace.putAttribute(attribute, value);\n        return;\n    }\n    async getAttribute({ traceName, attribute, }) {\n        var _a;\n        const trace = this.traces[traceName];\n        if (!trace) {\n            throw new Error(FirebasePerformanceWeb.ERROR_TRACE_NOT_FOUND);\n        }\n        return { value: (_a = trace.getAttribute(attribute)) !== null && _a !== void 0 ? _a : null };\n    }\n    async getAttributes({ traceName, }) {\n        const trace = this.traces[traceName];\n        if (!trace) {\n            throw new Error(FirebasePerformanceWeb.ERROR_TRACE_NOT_FOUND);\n        }\n        return { attributes: trace.getAttributes() };\n    }\n    async removeAttribute({ traceName, attribute, }) {\n        const trace = this.traces[traceName];\n        if (!trace) {\n            throw new Error(FirebasePerformanceWeb.ERROR_TRACE_NOT_FOUND);\n        }\n        trace.removeAttribute(attribute);\n    }\n    async putMetric({ traceName, metricName, num, }) {\n        const trace = this.traces[traceName];\n        if (!trace) {\n            throw new Error(FirebasePerformanceWeb.ERROR_TRACE_NOT_FOUND);\n        }\n        trace.putMetric(metricName, num);\n    }\n    async getMetric({ traceName, metricName, }) {\n        const trace = this.traces[traceName];\n        if (!trace) {\n            throw new Error(FirebasePerformanceWeb.ERROR_TRACE_NOT_FOUND);\n        }\n        return { value: trace.getMetric(metricName) };\n    }\n    async record({ traceName, startTime, duration, options, }) {\n        const perf = getPerformance();\n        const trace = createTrace(perf, traceName);\n        trace.record(startTime, duration, options);\n    }\n}\nFirebasePerformanceWeb.ERROR_TRACE_NOT_FOUND = 'No trace was found with the provided traceName.';\n//# sourceMappingURL=web.js.map"],"names":["registerPlugin","WebPlugin","getPerformance","createTrace"],"mappings":"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"}