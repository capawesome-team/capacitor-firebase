{"version":3,"file":"plugin.js","sources":["esm/index.js","esm/web.js"],"sourcesContent":["import { registerPlugin } from '@capacitor/core';\nconst FirebasePerformance = registerPlugin('FirebasePerformance', {\n    web: () => import('./web').then(m => new m.FirebasePerformanceWeb()),\n});\nexport * from './definitions';\nexport { FirebasePerformance };\n//# sourceMappingURL=index.js.map","import { WebPlugin } from '@capacitor/core';\nimport { trace as createTrace, getPerformance } from 'firebase/performance';\nexport class FirebasePerformanceWeb extends WebPlugin {\n    constructor() {\n        super(...arguments);\n        this.traces = {};\n    }\n    async startTrace(options) {\n        const perf = getPerformance();\n        const trace = createTrace(perf, options.traceName);\n        trace.start();\n        this.traces[options.traceName] = trace;\n    }\n    async stopTrace(options) {\n        const trace = this.traces[options.traceName];\n        if (!trace) {\n            throw new Error(FirebasePerformanceWeb.ERROR_TRACE_NOT_FOUND);\n        }\n        trace.stop();\n        delete this.traces[options.traceName];\n    }\n    async incrementMetric(options) {\n        const trace = this.traces[options.traceName];\n        if (!trace) {\n            throw new Error(FirebasePerformanceWeb.ERROR_TRACE_NOT_FOUND);\n        }\n        trace.incrementMetric(options.metricName, options.incrementBy);\n    }\n    async setEnabled(options) {\n        const perf = getPerformance();\n        perf.instrumentationEnabled = options.enabled;\n        perf.dataCollectionEnabled = options.enabled;\n    }\n    async isEnabled() {\n        const perf = getPerformance();\n        const result = {\n            enabled: perf.instrumentationEnabled || perf.dataCollectionEnabled,\n        };\n        return result;\n    }\n    async putAttribute({ traceName, attribute, value, }) {\n        const trace = this.traces[traceName];\n        if (!trace) {\n            throw new Error(FirebasePerformanceWeb.ERROR_TRACE_NOT_FOUND);\n        }\n        trace.putAttribute(attribute, value);\n        return;\n    }\n    async getAttribute({ traceName, attribute, }) {\n        var _a;\n        const trace = this.traces[traceName];\n        if (!trace) {\n            throw new Error(FirebasePerformanceWeb.ERROR_TRACE_NOT_FOUND);\n        }\n        return { value: (_a = trace.getAttribute(attribute)) !== null && _a !== void 0 ? _a : null };\n    }\n    async getAttributes({ traceName, }) {\n        const trace = this.traces[traceName];\n        if (!trace) {\n            throw new Error(FirebasePerformanceWeb.ERROR_TRACE_NOT_FOUND);\n        }\n        return { attributes: trace.getAttributes() };\n    }\n    async removeAttribute({ traceName, attribute, }) {\n        const trace = this.traces[traceName];\n        if (!trace) {\n            throw new Error(FirebasePerformanceWeb.ERROR_TRACE_NOT_FOUND);\n        }\n        trace.removeAttribute(attribute);\n    }\n    async putMetric({ traceName, metricName, num, }) {\n        const trace = this.traces[traceName];\n        if (!trace) {\n            throw new Error(FirebasePerformanceWeb.ERROR_TRACE_NOT_FOUND);\n        }\n        trace.putMetric(metricName, num);\n    }\n    async getMetric({ traceName, metricName, }) {\n        const trace = this.traces[traceName];\n        if (!trace) {\n            throw new Error(FirebasePerformanceWeb.ERROR_TRACE_NOT_FOUND);\n        }\n        return { value: trace.getMetric(metricName) };\n    }\n    async record({ traceName, startTime, duration, options, }) {\n        const perf = getPerformance();\n        const trace = createTrace(perf, traceName);\n        trace.record(startTime, duration, options);\n    }\n}\nFirebasePerformanceWeb.ERROR_TRACE_NOT_FOUND = 'No trace was found with the provided traceName.';\n//# sourceMappingURL=web.js.map"],"names":["registerPlugin","WebPlugin","getPerformance","createTrace"],"mappings":"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"}